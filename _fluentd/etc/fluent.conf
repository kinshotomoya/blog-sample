<source>
  // 読み込み
  @type tail
  path /var/log/nginx/docker.access.log
  // fluentdがログの元ファイルのどこまで読み込んだかを記録するファイル
  pos_file /tmp/access.log.pos
  // formatを指定することで、その形式にあったログを抽出してくれる
  format nginx
  // tagの名前は好きにつけることができる
  // 下の<match>で利用する
  tag nginx.access
</source>

<match nginx.access>
  // 転送処理
  @type elasticsearch
  // 転送先のESを指定
  host elasticsearch
  port 9200
  // kibanaで利用するためにindexの形式を整える
  logstash_format true
  logstash_prefix nginx
  // ESのtypeを指定する
  type_name accesslogs
</match>

<source>
  // アプリケーションからログを受け取る
  // go側で、fluentdクライアントを用いてログを送信している
  @type forward
  port 24224
</source>

<match blog.search>
  // アプリケーション側で、。blog.searchというタグでログを送信する
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix search
  type_name searchlogs
</match>
